```jsx
import React, { useState } from 'react'
export function proxy<T extends object>(initialValue: T): T {
  const keys = new Set<string>();  // tracks the keys of the properties accessed
  let setState: React.Dispatch<React.SetStateAction<T>>;  // setState declaration
  const proxyObj = new Proxy<T>((initialValue), {
    get (target: T, key: string) {
      keys.add(key);
      return Reflect.get(target, key);
    },
    set (target: T, key: string, value) {
      if (key === 'setState') {
        setState = value;  // setState initialization which happens only once from inside useSnapshot
        return false;
      }
      if (Reflect.get(target, key) === value) return true;  // new val === old val, then return true without updating
      const status = Reflect.set(target, key, value);
      if (status && keys.has(key)) {
        keys.clear();
        setState((prev) => ({...prev, [key]: value}));
      }
      return status;
    }
  });
  return proxyObj;
}
export function useSnapshot<T extends object>(proxyObj: T): T {
  //  extract setState method from React state management
  const [_, setState] = useState();
  // set setState handler on target proxy
  Reflect.set(proxyObj, 'setState', setState);
  return proxyObj; // this proxy has setState assigned which can be used as proxyObj.initialValue += 1 which would invoke [[Get]] first and then [[Set]].
}

```
